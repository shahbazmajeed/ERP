{% extends "Vlayout.html" %}
{% load static %}
{% block Vcontent %}

<h3 class="mb-4">ðŸ“Š Attendance Analysis</h3>

<form method="get" action="{% url 'attendance_analysis' %}" class="row g-3">

    <div class="col-md-3">
        <label for="branch" class="form-label">Branch</label>
        <select name="course" id="branch" class="form-select" required>
            <option value="">-- Select Branch --</option>
            {% for c in courses %}
                <option value="{{ c }}" {% if request.GET.course == c %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="col-md-2">
        <label for="year" class="form-label">Year</label>
        <select name="year" id="year" class="form-select" required>
            <option value="">-- Select Year --</option>
            {% for y in "1,2,3".split(',') %}
                <option value="{{ y }}" {% if request.GET.year == y %}selected{% endif %}>{{ y }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="col-md-2">
        <label for="section" class="form-label">Section</label>
        <select name="section" id="section" class="form-select" required>
            <option value="">-- Select Section --</option>
            {% for s in "A,B,C".split(',') %}
                <option value="{{ s }}" {% if request.GET.section == s %}selected{% endif %}>{{ s }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="col-md-3">
        <label for="subject" class="form-label">Subject</label>
        <select name="subject_id" id="subject" class="form-select" required>
            <option value="">-- Select Subject --</option>
            {% for subj in subjects %}
                <option value="{{ subj.id }}" {% if request.GET.subject_id == subj.id|stringformat:"s" %}selected{% endif %}>{{ subj.subject_name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="col-md-2 d-flex align-items-end">
        <button type="submit" class="btn btn-primary w-100">Analyze</button>
    </div>

</form>

{% endblock %}
